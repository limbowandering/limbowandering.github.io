---
title: å®ä¹ ä¸‰å‘¨çš„ä¸€äº›æƒ³æ³•
Date: 2018-7-29
Categories: Web
Tags: [JavaScript, CSS, ç”Ÿæ´»]
---

## å†™åœ¨å‰é¢

è¿™ä¸‰å‘¨åœ¨å®ä¹ , å‘ç°è‡ªå·±çœŸçš„æ˜¯èœå•Š, å¤ªå¤šä¸ä¼šçš„äº†. è€Œä¸”æœ¬æ¥è¿˜è¯´åšæŒæ›´æ–°åšå®¢çš„. ä½†æ˜¯è‡ªå·±ç°åœ¨å†™çš„ä¸œè¥¿åŸºæœ¬éƒ½æ˜¯ç½‘ä¸Šåˆ«äººåšè¿‡çš„, å†å†™ä¸€éæœ‰ä»€ä¹ˆæ„æ€å‘¢. å¯æ˜¯è¿™é‡Œæ˜¯æˆ‘çš„åšå®¢å•Š! æˆ‘è®°å½•æˆ‘çš„ä¸œè¥¿. å¯æ˜¯æœ‰æ—¶å€™å¥½å¤šä¸œè¥¿å†™èµ·æ¥çœŸçš„è´¹åŠ². è€Œä¸”æˆ‘åˆä¸æ˜¯å†™çš„é‚£ç§å¯¹å¥½å¤šäººæœ‰ç”¨çš„ä¸œè¥¿. ä¸ºä»€ä¹ˆè¿˜è¦å†™å‘¢. æœ‰äº›è¿·èŒ«äº†.

è€Œä¸”æ—¶é—´æ˜¯çœŸçš„ä¸å¤Ÿç”¨å•Š! å“ªæ¥çš„æ—¶é—´å†™åšå®¢å•Š. æˆ‘è‡ªå·±çš„ç”µè„‘ä¸€å‘¨éƒ½ä¸å¼€æœºä¸€æ¬¡. è‡ªå·±ç°åœ¨çš„çŠ¶æ€åªæ˜¯åœ¨æ‹¼å‘½çš„å­¦è€Œå·². 

ä½†æ˜¯, è¿˜æ˜¯æƒ³åšæŒå†™ä¸‹å». æˆ‘çš„ç”Ÿæ´»æŒºå¤šç»´çš„, ä»¥åè¿™é‡Œå°±åªå†™æŠ€æœ¯ç›¸å…³çš„äº†, ç”šè‡³è½¯æŠ€èƒ½æ–¹å‘çš„éƒ½ä¸æƒ³å†™. å…¶ä»–çš„ä¸œè¥¿æˆ‘è‡ªå·±æœ‰å†å†™, ä½†æ˜¯é—­æºç•™ç€è‡ªå·±çœ‹äº†. ä»¥ååªå†™æŠ€æœ¯çš„, è€Œä¸”æ˜¯ä½œä¸ºé¡ºå¸¦ç€çš„å†™, ä¸ä¼šä¸“é—¨æŠ½æ—¶é—´å†™åšå®¢. é™¤éè‡ªå·±èƒ½å†™å‡ºå‡ åƒå‡ ä¸‡ä¸ªå°ç™½éƒ½ä¼šçœ‹çš„æ•™ç¨‹...

ä¸è¯´äº†, è¿™ç¯‡åšå®¢ç®—æ˜¯æ¬ çš„å€ºè¡¥ä¸€ä¸‹. å‰ä¸‰å‘¨æœ¬æœ‰éœ€è¦å†™çš„åšå®¢,å¯æ˜¯æ™šä¸Šä¸€æ‡’å°±æ²¡å†™(ä¹Ÿä¸æ˜¯æ‡’å•Š, çªç„¶ä¸é€‚åº”è¿™æ ·çš„ç”Ÿæ´»). å“, æˆ‘ç»™è‡ªå·±çš„åŒ…è¢±ä¹Ÿå¾ˆå¤š, å¾ˆå¤šä¸œè¥¿çœŸçš„ä¸é‡è¦. æˆ‘åº”è¯¥ç”©æ‰å¾ˆå¤šåŒ…è¢±å¤šåšç‚¹ä¸œè¥¿. è¿™åŠå¹´é€æ¸ä»ä¸€ä¸ªè¢«å¤§å­¦è¿™éšå½¢çš„å¢™å›´èµ·æ¥çš„ä¸çŸ¥ç”Ÿæ´»è‹¦ç—›çš„å¤§å­¦ç”Ÿå‘ç¤¾ä¼šäººè½¬å˜äº†. è‡ªå·±çš„å˜åŒ–ä¹ŸæŒºå¤š, å¤šåˆ°ä¸æƒ³å†™åšå®¢, éƒ½è¿‡å»äº†. 

ä»¥åä¼šå¥½å¥½å†™åšå®¢çš„, è¿™ä¸€ç¯‡ç»™å‰ä¸‰å‘¨ä¸€ä¸ªç®€å•çš„å¿«é€Ÿæ€»ç»“.

## å†™åœ¨æŠ€æœ¯å†…å®¹ä¹‹å‰

è¿™ç¯‡æ–‡ç« è¿˜æ˜¯éæŠ€æœ¯å¤šäºæŠ€æœ¯. æˆ‘è¶Šæ¥è¶Šæ˜ç™½ä»¥ä¸‹é“ç†. 

- 80%ä»¥ä¸Šçš„äº‹æƒ…éƒ½æ˜¯ä¸é‡è¦çš„, éœ€è¦æŠ“ä½çœŸæ­£é‡è¦çš„ä¸œè¥¿å»åš.
- æ¬ å€ºéƒ½æ˜¯è¦è¿˜çš„. æ—©è¯¥å­¦ä¼šçš„ä¸œè¥¿æ—©æ™šéƒ½è¦å­¦ä¼šçš„. ç¬¬ä¸€æ¬¡é‡åˆ°çš„æ—¶å€™å°±åº”è¯¥è¿éš¾è€Œä¸Šåšæ‰.
- ä¸è¦åšæ²¡æœ‰æ„ä¹‰çš„äº‹æƒ…, åšäº‹æƒ…å°±åƒæ˜¯æ¬ç –, æœ‰çš„æ¬ç –å°±åƒæ˜¯æ­æ¢¯å­, ä¸ºè‡ªå·±ç§¯ç´¯, æœ‰çš„åªæ˜¯çº¯å±æ¶ˆè€—ä½“åŠ›, æ²¡é•¿è¿œæ„ä¹‰, è¿™äº›äº‹å°‘åš.

å“, å¥½ä¹…æ²¡æ›´æ–°åšå®¢äº†. æƒ³åœ¨åšå®¢ä¸Šå†™çš„ä¸œè¥¿æŒºå¤š, è‡ªå·±çš„å˜åŒ–ä¹ŸæŒºå¤š, è¿˜æ˜¯æ…¢æ…¢å†™å§.

ä»¥ååˆ«äººå†™çš„å¥½çš„åšå®¢, æˆ‘å°±ä¸ä¼šå†å†™ä¸€éäº†. æˆ‘åªä¼šå†™æˆ‘å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜å’Œæˆ‘è§£å†³çš„æ–¹æ³•, é¡ºå¸¦ç€å†™. å’Œä¸€äº›ç‰¹åˆ«å¥½çš„æ€»ç»“å§.

## ä¸‹é¢

å·ä¸ªæ‡’, ä»Šå¤©äº‹æƒ…è¿˜æŒºå¤š. å¤åˆ¶ä¸€ä¸‹å®ä¹ æ—¥ç»“é‡Œå¤´å†™çš„ä¸œè¥¿.

## Node-FTP

ä½¿ç”¨äº†GitHubä¸Šä¸€ä¸ªnode-ftpå®¢æˆ·ç«¯æ¨¡å—ï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹æœ¬æ¬¡é¡¹ç›®ç”¨çš„API

#### äº‹ä»¶

- `ready()  `- å½“è¿æ¥å»ºç«‹ä¸”è®¤è¯æˆåŠŸ
- `end()` - å½“è¿æ¥å…³é—­
- `error(<Error>err)` - å½“å‘ç”Ÿé”™è¯¯æ—¶å€™

#### æ–¹æ³•

æ³¨ï¼šæè¿°ä¸å…¨ åªæ˜¯ä»Šå¤©ç”¨åˆ°çš„éƒ¨åˆ† å®Œæ•´æè¿°æŸ¥çœ‹[github](https://github.com/mscdex/node-ftp)

- `connect(<object>config)` - æŒ‰ç…§è¿æ¥é…ç½®è¿›è¡Œè¿æ¥ ä¸»è¦é…ç½®: host,port,user,password.

- `list([<string>path,][<boolean>useCompression,]<function>callback)` - è·å–pathä¸‹çš„ç›®å½•ä¸æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯å½“å‰å·¥ä½œç›®å½•ï¼Œå›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œerrå’Œ`<array>list` ã€‚ <u>æ³¨æ„ï¼Œå¦‚æœlistäº†ä¸€ä¸ªä¸å­˜åœ¨çš„ç›®å½•ï¼Œä¸€æ ·ä¼šæœ‰è¿”å›å€¼ï¼Œä¸æŠ¥é”™ï¼Œä½†æ˜¯list.length ä¸º0.</u> listæ˜¯ä¸€ä¸ªarrayï¼Œæ¯ä¸€é¡¹ä¼šæœ‰ä¸€ä¸‹æè¿°ä¿¡æ¯ï¼š

  ```
  - type
  - name
  - size
  - date
  Â·Â·Â·
  ```

- `get(<string>path, [<boolean>useCompression,]<function>callback)`  è·å–æ–‡ä»¶ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯è¯»æ–‡ä»¶æµ

- `put(input,destPath,callback)` å‘destpathè·¯å¾„ä¸Šä¼ æ–‡ä»¶ã€‚å›è°ƒå‡½æ•°åªæœ‰ä¸€ä¸ªErrorå‚æ•°

- `rename(oldPath,newPath,callback)` ç§»åŠ¨æ–‡ä»¶ï¼Œ<u>æ³¨æ„ï¼Œå¦‚æœå‘ä¸å­˜åœ¨çš„è·¯å¾„ç§»åŠ¨ä¼šæŠ¥é”™ï¼Œä¸ä¼šè‡ªåŠ¨æ–°å»ºè·¯ç»ï¼Œæ‰€ä»¥è¦å…ˆmkdir</u>

- `delete(path,callback)` åˆ é™¤æ–‡ä»¶

- `mkdir([<string>path,][<boolean>recursive,]<function>callback)` è¿”å›å€¼voidã€‚pathæ˜¯è¦æ–°å»ºç›®å½•çš„è·¯å¾„ã€‚<u>æ³¨æ„ï¼Œå¦‚æœå¤šæ¬¡å»ºç«‹åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸ä¼šæŠ¥é”™ï¼Œç»“æœè¿˜æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯æ²¡æœ‰æµ‹è¯•å¦‚æœé‡Œå¤´æœ‰æ–‡ä»¶ä¼šä¸ä¼šé€ æˆæ–‡ä»¶ä¸¢å¤±</u>

- `rmdir(path,recursive,callback)` åˆ é™¤æ–‡ä»¶å¤¹

## JSäº‹ä»¶å¾ªç¯

ä»Šå¤©è¯¦ç»†åœ°äº†è§£äº†ä¸€ä¸‹JS Event Loopçš„æœºåˆ¶ï¼Œå¼‚æ­¥ä»»åŠ¡æŒ‰ä»€ä¹ˆæ ·çš„å‡†åˆ™æ‰§è¡Œã€‚

ç®€è€Œè¨€ä¹‹ï¼š

- JSæ‰€æœ‰çš„ä»»åŠ¡éƒ½éœ€è¦åœ¨ä¸»çº¿ç¨‹æ’é˜Ÿç­‰å¾…ã€‚ä»»åŠ¡åˆåˆ†åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŸºäºEvent Loopæœºåˆ¶æ‰§è¡Œã€‚

- åŒæ­¥ä»»åŠ¡ä½œä¸ºé¦–è¦ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡è¢«å‘é…åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ç®¡ç†çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†ã€‚å¼‚æ­¥ä»»åŠ¡ç¬¦åˆæ¡ä»¶ï¼ˆæ¯”å¦‚ajaxè¯·æ±‚åˆ°æ•°æ®ï¼ŒsetTimeoutå»¶æ—¶åˆ°æœŸï¼‰åï¼Œä¼šåœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ å¯æ‰§è¡Œâ€œäº‹ä»¶â€ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ä¸­çš„åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åˆ°ä»»åŠ¡é˜Ÿåˆ—é‡Œè¯»å–å½“å‰å¯æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä»¥æ­¤å¾ªç¯ã€‚ï¼ˆæ‰€ä»¥æ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡éƒ½æ˜¯åœ¨æ‰€æœ‰çš„åŒæ­¥ä»»åŠ¡å®Œæˆä¹‹åæ‰æ‰§è¡Œçš„ï¼Œè¿™ä¸€ç‚¹æ˜¯åŸºæœ¬ï¼‰

- JSä¸­çš„å¼‚æ­¥ä»»åŠ¡ï¼šæœ‰setTimeoutï¼ŒsetIntervalç­‰å®šæ—¶ä»»åŠ¡ï¼ŒPromiseï¼ŒMutationObserverç›‘å¬DOMï¼Œprocess.nextTickï¼ˆNodeï¼‰. 

- å¼‚æ­¥çš„å®ç°æœ‰ä¸¤ä¸ªæœºæ™º macro-taskå’Œmicro-taskã€‚

  - <u>macrotasksåŒ…æ‹¬ï¼šscriptï¼ˆæ•´ä½“ä»£ç ï¼‰ã€setTimeout, setInterval, setImmediate, I/O, UI Renderingï¼›</u>
  - <u>microtasksåŒ…æ‹¬ï¼šÂ process.nextTick, Promise, Object.observe, MutationObserverã€‚</u>

  macrotasks, microtasksæ‰§è¡Œæœºåˆ¶ï¼š

  <u>1.ä¸»çº¿ç¨‹æ‰§è¡Œå®Œåä¼šå…ˆåˆ°micro-taské˜Ÿåˆ—ä¸­è¯»å–å¯æ‰§è¡Œä»»åŠ¡</u>

  <u>2.ä¸»çº¿ç¨‹æ‰§è¡Œmicro-taskä»»åŠ¡</u>

  <u>3.ä¸»çº¿ç¨‹åˆ°macro-taskä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–å¯æ‰§è¡Œä»»åŠ¡</u>

  <u>4.ä¸»çº¿ç¨‹æ‰§è¡Œmacro-taskä»»åŠ¡</u>

  <u>5....è½¬åˆ°Step 1</u>

  è¿™é‡Œæ³¨æ„çš„æ˜¯ï¼ŒUI Renderingæ˜¯åœ¨micro-taskä¹‹åæ‰§è¡Œï¼Œéœ€è¦åœ¨UIæ¸²æŸ“ä¹‹å‰æ‰§è¡Œçš„é€»è¾‘ï¼Œä¸€èˆ¬é‡‡ç”¨micro-taskå¼‚æ­¥å›è°ƒæ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚

  åŒæ ·ï¼Œmicro-taské˜Ÿåˆ—ä¸å®œè¿‡é•¿ï¼Œç»™micro-taské˜Ÿåˆ—æ·»åŠ è¿‡å¤šå›è°ƒé˜»å¡macro-taské˜Ÿåˆ—çš„ä»»åŠ¡æ‰§è¡Œæ˜¯å°äº‹ï¼Œé‡ç‚¹æ˜¯è¿™æœ‰å¯èƒ½ä¼šé˜»å¡UI Renderï¼Œå¯¼è‡´é¡µé¢ä¸èƒ½æ›´æ–°ã€‚æµè§ˆå™¨ä¹Ÿä¼šåŸºäºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼Œå¯¹micro-taskä¸­çš„ä»»åŠ¡ä¸ªæ•°è¿›è¡Œé™åˆ¶ã€‚

- å¯ä»¥é…åˆè¿™å¼ å›¾ç†è§£

  ![](../../../../images/js-event-loop.png)

- æ‰€ä»¥ï¼Œå†™çš„ä»£ç æœ‰ä¸€äº›æ³¨æ„ç‚¹ï¼Œæ˜¨å¤©æˆ‘æŠŠå›è°ƒå‡½æ•°å½“æˆäº†ä¼šç«‹åˆ»æ‰§è¡Œï¼ˆè™½ç„¶ä¹‹å‰äº†è§£è¿‡ï¼Œæ²¡æœ‰å†™è¿‡å°±æ˜¯å°è±¡ä¸æ·±ï¼‰ï¼Œä»Šå¤©å¯¹äºpromiseï¼Œä¹Ÿæ˜¯è¦æ³¨æ„ï¼Œè€æ˜¯ä¸‹æ„è¯†è®¤ä¸ºresolveçŠ¶æ€å°±ä¼šåƒåŒæ­¥ä¸€æ ·æ‰§è¡ŒğŸ˜¶ ç°åœ¨åŒºåˆ†æ¸…æ¥šäº†æ„Ÿè§‰ä¹ŸæŒºæ¸…æ™°çš„ã€‚

- ç½‘ä¸Šæœ‰ä¸ªä¾‹å­

  ```javascript
  (function test() {
      setTimeout(function() {console.log(4)}, 0);
      new Promise(function executor(resolve) {
          console.log(1);
          for( var i=0 ; i<10000 ; i++ ) {
              i == 9999 && resolve();
          }
          console.log(2);
      }).then(function() {
          console.log(5);
      });
      console.log(3);
  })()
  //æŒ‰ç…§ä¸Šé¢çš„åŸåˆ™é€æ­¥åˆ†æçš„è¯ è¾“å‡ºé¡ºåºæ˜¯: 1 2 3 5 4
  ```

## Promise

åªè®°å½•ä»Šå¤©ç”¨åˆ°çš„éƒ¨åˆ†å’Œæ³¨æ„ç‚¹ï¼Œä¸å…¨ã€‚

- Promiseæ–°å»ºå°±ä¼šç«‹å³æ‰§è¡Œï¼› Promiseå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå†…éƒ¨æŠ›å‡ºé”™è¯¯ä¸ä¼šåæ˜ åˆ°å¤–éƒ¨ã€‚

- `Promise.prototype.then()` ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯resolveçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚ è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚ <u>æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæœ‰åé¢çš„ä»£ç éœ€è¦ä¾èµ–è¿™é‡Œçš„ç»“æœï¼Œå°±å¯ä»¥ç›´æ¥return è¿™ä¸ªPromiseå¯¹è±¡ï¼Œç»“æœè‡ªç„¶å°±å‡ºå»äº†ï¼Œæˆ–è€…æ˜¯å¿…é¡»è¦è¿™ä¸ªä»»åŠ¡å…ˆå½»åº•æ‰§è¡Œå®Œæ¯•ï¼Œï¼ˆæœ‰ç‚¹æ„Ÿè§‰åƒæ˜¯åŒæ­¥ï¼ŒæŒ‡å®šé¡ºåºï¼‰ï¼Œä¹Ÿå¯ä»¥return éœ€è¦å¤„ç†çš„Promiseå¯¹è±¡ã€‚ Promiseå¯¹è±¡æ€»æ˜¯è¦returnå‡ºæ¥çš„ã€‚</u> 

- `Promise.prototype.catch()` æ˜¯`.then(null, rejection)`çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚

- `Promise.prototype.finally()` ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚

  ```javascript
  promise
  .then(result => {Â·Â·Â·})
  .catch(error => {Â·Â·Â·})
  .finally(() => {Â·Â·Â·});
  //è¿™æ ·çš„å¥—è·¯
  ```

- `Promise.all()` ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹. 

## promise-ftp

GitHubä¸Šçš„ä¸€ä¸ªç”¨promiseå°è£…çš„node-ftpæ¨¡å—ï¼Œæä¾›promise-based APIã€‚ è¿™ç°æˆçš„ï¼Œå°±å¾ˆæé«˜å¼€å‘é€Ÿåº¦ã€‚

### axios

axiosæ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“,å¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­. 

é‡åˆ°çš„é—®é¢˜æ˜¯, æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£, postçš„æ—¶å€™éœ€è¦åŠ å‚æ•°çš„, å³ä½¿æ˜¯ç©ºä¹Ÿè¦åŠ `{}` .

```javascript
return axios.post('/path',{},{
    //{}æ˜¯è¦åŠ çš„
    withCredentials: true
    //withCredentials è¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯
}).then((resp) =>{
    return resp.data.data;
})
//resp æŸ¥çœ‹æ–‡æ¡£è¯·æ±‚å“åº”çš„ç»“æ„
{
    //æœåŠ¡å™¨æä¾›çš„å“åº”
    data: {}
    ...å…¶ä»–ä¿¡æ¯
}
```

### å‹å¥½æ„è¯†

æ¯”å¦‚è¦ç”Ÿæˆä¸€å¼ å›¾ç‰‡, å°±è¿™ä¹ˆè®©ç”¨æˆ·ç­‰ç€ä¸å¤ªå¥½, å¯ä»¥åšä¸€ä¸ªloadingè½¬åœˆåœˆçš„æ•ˆæœ.

### ä¸€ä¸ªé‡å¤çš„é”™è¯¯

```javascript
xxxx(æŸpromiseå¯¹è±¡).then(function(){
    å¼‚æ­¥å›è°ƒæ“ä½œA
})

åˆæŠŠæ“ä½œAå†™åˆ°äº†å¤–é¢. æˆ‘è§‰å¾—ä¸‹æ¬¡åº”è¯¥æ²¡æœ‰è¿™ç§é”™è¯¯äº†...
```

### HTTPçŠ¶æ€ç 

ä»Šå¤©ä¸€æ¬¡è¯·æ±‚, é‡åˆ°äº†çŠ¶æ€ç 100. ä¸çŸ¥é“ä»€ä¹ˆæ„æ€, 100æ˜¯`ç»§ç»­. å®¢æˆ·ç«¯åº”ç»§ç»­è¯·æ±‚` çš„æ„æ€. 

çŠ¶æ€ç ä¹Ÿæ˜¯æŒºæœ‰ç”¨çš„, ç”¨æ—¶æŸ¥ä¸€ä¸‹å°±è¡Œ...æµè§ˆä¸€ä¸‹å¤§è‡´è®°å¾— å¤ªå¤šäº†ä¸å†™äº†...

è¿˜æœ‰ å¤šçœ‹çœ‹chrome å¼€å‘è€…å·¥å…· networkä»€ä¹ˆçš„ èƒ½è‡ªä¸»å‘ç°,è§£å†³å¥½å¤šé—®é¢˜

### é¢„è¯·æ±‚

ä»Šå¤©çœ‹chrome devtools networkå‘ç°åŒä¸€ä¸ªè¯·æ±‚å‘äº†ä¸¤æ¬¡, è¯·æ±‚çš„method,ä¸€æ¬¡æ˜¯`post` ä¸€æ¬¡æ˜¯`option` é‚£ä¹ˆè¿™ä¸ª`option` æ˜¯ä»€ä¹ˆé¬¼å‘¢. 

åŸå› æ˜¯æµè§ˆå™¨å¯¹ç®€å•è·¨åŸŸè¯·æ±‚å’Œå¤æ‚è·¨åŸŸè¯·æ±‚çš„å¤„ç†åŒºåˆ«. è¿™ç§å«`preflighted request`.

preflighted requeståœ¨å‘é€çœŸæ­£çš„è¯·æ±‚å‰, ä¼šå…ˆå‘é€ä¸€ä¸ªæ–¹æ³•ä¸ºOPTIONSçš„é¢„è¯·æ±‚(preflight request), ç”¨äºè¯•æ¢æœåŠ¡ç«¯æ˜¯å¦èƒ½æ¥å—çœŸæ­£çš„è¯·æ±‚, å¦‚æœoptionsè·å¾—çš„å›åº”æ˜¯æ‹’ç»æ€§è´¨çš„, æ¯”å¦‚404\403\500ç­‰httpçŠ¶æ€, å°±ä¼šåœæ­¢post putç­‰è¯·æ±‚çš„å‘å‡º. 

### vm.$nextTick([callback])

åœ¨ä¸€æ¬¡æ“ä½œä¹‹åæ€ä¹ˆéƒ½æ²¡æœ‰å‘ç°é—®é¢˜ä¹‹å, çŸ¥é“äº†è¿™ä¸ªæ–¹æ³•. VueçŠ¶æ€æ›´æ–°äº†. ä½†æ˜¯DOMæ ‘è¿˜æ²¡æœ‰æ¸²æŸ“å¥½. è¿™æ—¶å€™å¦‚æœå¯¹DOMæ“ä½œ,å¾—åˆ°çš„å€¼å°±å¯èƒ½ä¸æ˜¯é¢„æœŸçš„äº†. 

æ‰€ä»¥`$nectTick` ç”¨æ³•æ˜¯

> å°†å›è°ƒå»¶è¿Ÿåˆ°ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ä¹‹åæ‰§è¡Œã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨å®ƒï¼Œç„¶åç­‰å¾… DOM æ›´æ–°ã€‚å®ƒè·Ÿå…¨å±€æ–¹æ³•Â `Vue.nextTick`Â ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å›è°ƒçš„Â `this`Â è‡ªåŠ¨ç»‘å®šåˆ°è°ƒç”¨å®ƒçš„å®ä¾‹ä¸Šã€‚

(æ“ä½œå¯ä»¥ç†è§£, ä½†æ˜¯å¦‚æœä¸çŸ¥é“å°±æœ‰ç‚¹æ–¹äº†, è¿˜æ˜¯è¦ä¸æ–­æ·±å…¥äº†è§£, æ…¢æ…¢æ¥,äº‰å–å‡ ä¸ªæœˆåè·Ÿç€æ³¨è§£çœ‹Vueæºç è§£æä»€ä¹ˆçš„ğŸ˜¶)

### .syncä¿®é¥°ç¬¦

`.sync` ä¿®é¥°ç¬¦æ˜¯ä»¥Â `update:my-prop-name`Â çš„æ¨¡å¼è§¦å‘äº‹ä»¶çš„ç¼©å†™.

> åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹ä¸€ä¸ª prop è¿›è¡Œâ€œåŒå‘ç»‘å®šâ€ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒçœŸæ­£çš„åŒå‘ç»‘å®šä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„é—®é¢˜ï¼Œå› ä¸ºå­ç»„ä»¶å¯ä»¥ä¿®æ”¹çˆ¶ç»„ä»¶ï¼Œä¸”åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½æ²¡æœ‰æ˜æ˜¾çš„æ”¹åŠ¨æ¥æºã€‚
>
> æ‰€ä»¥, æ¨èä»¥Â `update:my-prop-name`Â çš„æ¨¡å¼è§¦å‘äº‹ä»¶å–è€Œä»£ä¹‹ã€‚

## encodeURI

è®°ä¸€ä¸ªä»Šå¤©ç”¨åˆ°çš„ä¸œè¥¿, å¯¹URLè¿›è¡ŒEncode. 

æœ‰ä¸¤ä¸ªæ–¹æ³• `encodeURI` `encodeURIComponent` 

ä»åŠŸèƒ½ä¸Šè®²:

- `encodeURI`ï¼šä¸ä¼šè¿›è¡Œç¼–ç çš„å­—ç¬¦æœ‰82ä¸ª ï¼š!ï¼Œ#ï¼Œ$ï¼Œ&ï¼Œ'ï¼Œ(ï¼Œ)ï¼Œ*ï¼Œ+ï¼Œ,ï¼Œ-ï¼Œ.ï¼Œ/ï¼Œ:ï¼Œ;ï¼Œ=ï¼Œ?ï¼Œ@ï¼Œ_ï¼Œ~ï¼Œ0-9ï¼Œa-zï¼ŒA-Z
- `encodeURIComponent`:ä¸ä¼šè¿›è¡Œç¼–ç çš„å­—ç¬¦æœ‰71ä¸ªï¼š!ï¼Œ 'ï¼Œ(ï¼Œ)ï¼Œ*ï¼Œ-ï¼Œ.ï¼Œ_ï¼Œ~ï¼Œ0-9ï¼Œa-zï¼ŒA-Z

ä½¿ç”¨è§’åº¦ä¸Šè®²:

- `encodeURI` ä¸»è¦ç”¨äºç›´æ¥èµ‹å€¼ç»™åœ°å€æ æ—¶å€™ï¼š
- `encodeURIComponent` ä¸»è¦ç”¨äºurlçš„queryå‚æ•°

ä½†æ˜¯è¿™æ ·è¿˜æ˜¯æ„Ÿè§‰ä¸å¤Ÿ, è¦çŸ¥é“ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æ“ä½œ.

URLæ˜¯å¯ç§»æ¤çš„(portable). å®ƒè¦ç»Ÿä¸€åœ°å‘½åå› ç‰¹ç½‘ä¸Šæ‰€æœ‰çš„èµ„æºï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€è¦é€šè¿‡å„ç§ä¸åŒçš„åè®®æ¥ä¼ é€è¿™äº›èµ„æºã€‚è¿™äº›åè®®åœ¨ä¼ è¾“æ•°æ®æ—¶éƒ½ä¼šä½¿ç”¨ä¸åŒçš„æœºåˆ¶ï¼Œæ‰€ä»¥ï¼Œè®¾è®¡ URLï¼Œä½¿å…¶å¯ä»¥é€šè¿‡ä»»æ„å› ç‰¹ç½‘åè®®å®‰å…¨åœ°ä¼ è¾“æ˜¯å¾ˆé‡è¦çš„ã€‚å®‰å…¨ä¼ è¾“æ„å‘³ç€ URL çš„ä¼ è¾“ä¸èƒ½ä¸¢å¤±ä¿¡æ¯ã€‚è€Œä¸”è¿˜å¸Œæœ›å¯ä¾›äººç±»é˜…è¯». è¿˜å¾—æ˜¯å®Œæ•´çš„. 

äºæ˜¯, å°±å˜æˆäº†US-ASCII å­—ç¬¦é›†+è½¬ä¹‰åºåˆ—, é€šè¿‡è½¬ä¹‰åºåˆ—ï¼Œå°±å¯ä»¥ç”¨ US-ASCII å­—ç¬¦é›†çš„æœ‰é™å­é›†å¯¹ä»»æ„å­—ç¬¦å€¼æˆ–æ•°æ®è¿›è¡Œç¼–ç äº†ï¼Œè¿™æ ·å°±å®ç°äº†å¯ç§»æ¤æ€§å’Œå®Œæ•´æ€§ã€‚

ä¸ºäº†é¿å¼€å®‰å…¨å­—ç¬¦é›†è¡¨ç¤ºæ³•å¸¦æ¥çš„é™åˆ¶ï¼Œäººä»¬è®¾è®¡äº†ä¸€ç§ç¼–ç æœºåˆ¶ï¼Œç”¨æ¥åœ¨ URL ä¸­è¡¨ç¤ºå„ç§ä¸å®‰å…¨çš„å­—ç¬¦ã€‚è¿™ç§ç¼–ç æœºåˆ¶å°±æ˜¯é€šè¿‡ä¸€ç§â€œè½¬ä¹‰â€è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºä¸å®‰å…¨å­—ç¬¦çš„ï¼Œè¿™ç§è½¬ä¹‰è¡¨ç¤ºæ³•åŒ…å«ä¸€ä¸ªç™¾åˆ†å·ï¼ˆ%ï¼‰ï¼Œåé¢è·Ÿç€ä¸¤ä¸ªè¡¨ç¤ºå­—ç¬¦ ASCII ç çš„ åå…­è¿›åˆ¶æ•°ã€‚

```javascript
> encodeURIComponent("https://twitter.com/cancan_z98");
'https%3A%2F%2Ftwitter.com%2Fcancan_z98'
```

## git

æˆ‘è§‰å¾—å¥½çš„é…ç½®æŒºå¥½ç”¨çš„:

```
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.ci commit
git config --global alias.br branch
git config --global alias.unstage 'reset HEAD'
git config --global alias.last 'log -1'
git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"


all:
core.excludesfile=~/.gitignore
core.legacyheaders=false
core.quotepath=false
mergetool.keepbackup=true
push.default=simple
color.ui=auto
color.interactive=auto
repack.usedeltabaseoffset=true
alias.s=status
alias.a=!git add . && git status
alias.au=!git add -u . && git status
alias.aa=!git add . && git add -u . && git status
alias.c=commit
alias.cm=commit -m
alias.ca=commit --amend
alias.ac=!git add . && git commit
alias.acm=!git add . && git commit -m
alias.l=log --graph --all --pretty=format:'%C(yellow)%h%C(cyan)%d%Creset %s %C(white)- %an, %ar%Creset'
alias.ll=log --stat --abbrev-commit
alias.lg=log --color --graph --pretty=format:'%C(bold white)%h%Creset -%C(bold green)%d%Creset %s %C(bold green)(%cr)%Creset %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative
alias.llg=log --color --graph --pretty=format:'%C(bold white)%H %d%Creset%n%s%n%+b%C(bold blue)%an <%ae>%Creset %C(bold green)%cr (%ci)' --abbrev-commit
alias.d=diff
alias.master=checkout master
alias.spull=svn rebase
alias.spush=svn dcommit
alias.alias=!git config --list | grep 'alias\.' | sed 's/alias\.\([^=]*\)=\(.*\)/\1\     => \2/' | sort
include.path=~/.gitcinclude
include.path=.githubconfig
include.path=.gitcredential
diff.exif.textconv=exif
credential.helper=osxkeychain
core.excludesfile=/Users/eric/.gitignore_global
difftool.sourcetree.cmd=opendiff "$LOCAL" "$REMOTE"
difftool.sourcetree.path=
mergetool.sourcetree.cmd=/Applications/Sourcetree.app/Contents/Resources/opendiff-w.sh "$LOCAL" "$REMOTE" -ancestor "$BASE" -merge "$MERGED"
mergetool.sourcetree.trustexitcode=true
alias.co=checkout
alias.ci=commit
alias.br=branch
alias.unstage=reset HEAD
alias.last=log -1
alias.lg=log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
alias.st=status
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
core.ignorecase=true
core.precomposeunicode=true
remote.origin.url=https://github.com/BayernSoft/pandora-proxy.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.master.remote=origin
branch.master.merge=refs/heads/master
(END)
```

## å†™åœ¨æœ€å

å¤ªèœäº†. èœåˆ°ä¸æƒ³å†™åšå®¢. åæ­£éƒ½æœ‰äººå†™è¿‡äº†.

ä»¥åå°‘å†™è¿™ç§ä½è´¨é‡çš„. èµ·ç èƒ½å†™çš„æ˜¯å¯¹ç»†èŠ‚çš„æ¢ç©¶. 